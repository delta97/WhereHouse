url %>% read_html() %>%
html_nodes(".listingDescription") %>%
html_text() %>%
str_trim() %>%
sub(",.*","",State_zipcode)
})
State_zipcode <- unlist(State_zipcode)
State_zipcode <- as.data.frame(State_zipcode)
State_zipcode <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingDescription b") %>%
html_text() %>%
str_trim()
})
State_zipcode <- unlist(State_zipcode)
State_zipcode <- as.data.frame(State_zipcode)
View(State_zipcode)
View(title_data_html)
rm(first_result,records,results,title_data_html,title_data_html1,webpage,city_state,i,title_data)
rm(url)
city_state <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingDescription b") %>%
html_text() %>%
str_trim()
})
city_state <- unlist(State_zipcode)
city_state <- as.data.frame(State_zipcode)
View(State_zipcode)
city_state <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingDescription b") %>%
html_text() %>%
str_trim()
})
city_state <- unlist(city_state)
city_state <- as.data.frame(city_state)
View(city_state)
rm(State_zipcode)
extract(city_state, city_state, c("City", "State"), "(,.*)")
library(tidyverse)
extract(city_state, city_state, c("City", "State"), "(,.*)")
View(city_state)
View(city_state)
strsplit(city_state, "(,.*)")
strsplit(city_state, ",")
city_state %>% separate(city_state, c("City","State"))
View(city_state)
View(city_state)
city_state %>% separate(city_state, sep = "," c("City","State"))
city_state %>% separate(city_state, sep = ",*" c("City","State"))
city_state %>% separate(city_state, sep = "," ,c("City","State"))
library(rvest)
library(stringr)
library(tidyverse)
library(dplyr)
city_state %>% separate(city_state, sep = "," ,c("City","State"))
city_state %>% distinct("State")
city_state %>% count("State")
city_state %>% n_distinct()
city_state %>% n_distinct("State")
View(city_state)
city_state <- city_state %>% separate(city_state, sep = "," ,c("City","State"))
city_state %>% n_distinct("State")
View(city_state)
city_state %>% group_by("State")
city_state %>% group_by("State") %>% summarise()
city_state <- city_state %>% separate(city_state, sep = "," ,c("City","State")) %>% summarise()
city_state <- as.data.frame(city_state)
df <- as.data.frame(city_state)
View(city_state)
View(df)
df <- as.data.frame(city_state) %>% group_by("State") %>% summarise()
View(df)
df <- as.data.frame(city_state) %>% group_by("State")
View(df)
df <- group_by(city_state, State)
View(df)
df <- group_by(city_state, State)
city_state <- city_state %>% separate(city_state, sep = "," ,c("City","State"))
View(city_state)
df <- group_by(city_state, State)
df <- group_by(city_state, State) %>% summarise()
View(df)
df <- group_by(city_state, State) %>% summarise(count = n())
View(df)
df <- group_by(city_state, City) %>% summarise(count = n())
View(df)
df <- group_by(city_state, City) %>% summarise(count = n()) %>% sort()
View(city_state)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes") %>%
html_text() %>%
str_trim()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
View(price)
price <- price %>% seperate(price, sep="",c("Status", "Price","Property Type", "Sub-Type", "Spaces", "Space Avaible", "Building Size"))
price <- price %>% separate(price, sep="",c("Status", "Price","Property Type", "Sub-Type", "Spaces", "Space Avaible", "Building Size"))
View(price)
price <- price %>% separate(price, sep=":",c("Status", "Price","Property Type", "Sub-Type", "Spaces", "Space Avaible", "Building Size"))
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes b") %>%
html_text() %>%
str_trim()
})
price <- unlist(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[3]/table") %>%
html_text() %>%
str_trim()
})
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/table") %>%
html_text() %>%
str_trim()
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/table") %>%
html_text() %>%
str_trim()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/table") %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("tr") %>%
html_nodes("td") %>%
html_text()%>%
html_attr()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("tr") %>%
html_nodes("td") %>%
html_text()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_nodes("td") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("tr") %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("tr") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr td") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr td Price:") %>%
html_text()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr td Price") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[3]/table/tbody/tr[2]/td[2]") %>%
html_text()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[3]/table/tbody/tr[2]/td[2]") %>%
html_text()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("listingAttributes") %>%
html_table()
})
price <- unlist(price)
price <- as.data.frame(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes") %>%
html_ta()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes") %>%
html_table()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("table") %>%
html_table()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("table") %>%
html_a
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("table") %>%
html_table()
})
price <- unlist(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttribute .itemprop span") %>%
html_table()
})
price <- unlist(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttribute") %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes("#Form1 > div.maincontent.clearfix > div.seoContainer > div.seoListingsContainer > div.seoListings > div:nth-child(3) > table") %>%
html_table()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = //*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[4]/table) %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[4]/table") %>%
html_table()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(xpath = "//*[@id="Form1"]/div[2]/div[5]/div[1]/div[3]/div[4]/table") %>%
html_text()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr td") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr td td") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tbody tr td") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text()
})
price <- unlist(price)
price <- as.data.frame(price)
View(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
filter(price, "Price:")
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text()
})
price <-
price <- unlist(price)
price <- as.data.frame(price)
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
unlist() %>%
as.data.frame()
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
unlist(price) %>%
as.data.frame(price)
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
})
price <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
str_trim()
})
price <-
price <- unlist(price)
price <- as.data.frame(price)
View(price)
df1 <- filter(str_detect("Price:"))
df1 <- filter(price,str_detect("Price:"))
df1 <- price %>% filter(price,str_detect("Price:"))
df1 <- price %>% filter(price,str_detect("Price"))
df1 <- price %>% filter(str_detect(price,"Price"))
View(df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(sep = ":", c("Text","Fee"))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(sep = ":", c("Text","Fee"))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee"))
View(df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
select("Fee")
View(df1)
View(df1)
df1 <- df1[ df1 == "Rent Not Disclosed"]
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
mutate_all(funs(replace(., .=='Rent Not Disclosed', NA)))
View(df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
mutate(replace(fee =='Rent Not Disclosed', NA))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
mutate(fee, replace(fee =='Rent Not Disclosed', NA))
View(df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
extract_numeric(fee)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
extract_numeric()
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
as.numeric(gsub("[[:alpha:]]", "", fee))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
as.numeric(gsub("[[:alpha:]]", "", price))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee")) %>%
as.numeric(gsub("[[:alpha:]]", "",df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee"))
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee"))
View(df1)
df1$Fee = as.numeric(gsub("\\$", "", df$Fee))
df1$Fee = as.numeric(gsub("\\$", "", df$Fee))
df1$Fee = as.numeric(gsub("\\$", "", df1$Fee))
View(df1)
df1 <- price %>% filter(str_detect(price,"Price")) %>%
separate(price, sep = ":", c("Text","Fee"))
df1$Fee1 = as.numeric(gsub("\\$", "", df1$Fee))
View(df1)
df1$Fee1 = gsub("\\$", "", df1$Fee)
View(df1)
df1$Fee1 = gsub("[^0-9.]", "", df1$Fee)
View(df1)
df1$Fee1 = gsub("[^0-9.]", ",", df1$Fee)
View(df1)
df1$Fee1 = gsub("\\$,[^0-9.] ", "", df1$Fee)
View(df1)
df1$Fee1 = gsub("\\$","[^0-9.]", "", df1$Fee)
View(df1)
df1$Fee1 = gsub("\\$,", "", df1$Fee)
df1$Fee1 = gsub("[^0-9.]", "", df1$Fee)
View(df1)
df1$Fee1 = substr(df1$Fee1,1,nchar(df1$Fee1)-3)
View(df1)
df1 <- lapply(paste0('https://www.loopnet.com/warehouses-for-lease/', 1:20,sep="/"),
function(url){
url %>% read_html() %>%
html_nodes(".listingAttributes tr") %>%
html_text() %>%
str_trim()
})
df1 <- unlist(df1)
df1 <- as.data.frame(df1)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee"))
View(price)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
separate(df1, sep = "-", c("Min", "Max"))
View(price)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
separate(df1, sep = "-", c("Min", "Max"))
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
separate(Fee, sep = "-", c("Min", "Max"))
View(price)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee"))
View(price)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
gsub("\\$","",price$Fee)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
gsub("\\$","",Fee)
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
gsub("\\$","")
price <- df1 %>% filter(str_detect(df1,"Price")) %>%
separate(df1, sep = ":", c("Text","Fee")) %>%
gsub("\\$,","")
